<% content_for :body_class, 'bg-gray-50' %>

<%= render layout: 'layouts/base' do %>
  <!-- Navigation Bar -->
  <nav class="bg-white shadow-sm border-b border-gray-200" data-test="main-navigation">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <!-- Logo and Brand -->
        <div class="flex items-center">
          <%= link_to root_path, class: "flex items-center gap-3" do %>
            <div class="flex items-center justify-center w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
              </svg>
            </div>
            <div>
              <h1 class="text-xl font-bold text-gray-900">Orchestra AI</h1>
              <p class="text-xs text-gray-500">Autonomous Development Platform</p>
            </div>
          <% end %>
        </div>

        <!-- Navigation Links -->
        <div class="flex items-center gap-4">
          <%= link_to "All Epics", epics_path, 
              class: "text-sm font-medium text-gray-700 hover:text-indigo-600 transition duration-150" %>
          <%= link_to "New Epic", new_epic_path, 
              class: "inline-flex items-center gap-2 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-700 transition duration-150",
              data: { test: "nav-new-epic" } %>
          
          <% if user_signed_in? %>
            <div class="flex items-center gap-3 pl-4 border-l border-gray-200">
              <span class="text-sm text-gray-700">
                <%= current_user.email %>
              </span>
              <%= button_to "Sign out", destroy_user_session_path, 
                  method: :delete,
                  class: "text-sm text-gray-500 hover:text-gray-700 transition duration-150",
                  data: { test: "sign-out-button" } %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </nav>

  <%= yield %>
<% end %>
