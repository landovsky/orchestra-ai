# Orchestra AI - Project Rules

## Technology Stack

- **Backend**: Rails with PostgreSQL
- **Views**: ViewComponent (ERB templates)
- **Styling**: Tailwind CSS
- **JavaScript**: Stimulus JS
- **Background Jobs**: Sidekiq (Redis)
- **Database**: PostgreSQL with UUID primary keys

## Documentation

Any documentation except the main README.md belongs in `docs/`

## Backend Conventions

### Database

- Use UUIDs as primary keys for all tables

### Model Design

- Keep models thin - avoid putting business logic in models

### Business Logic Organization

**Domain Structure:**
- Separate business logic by domain
- Use singular domain names stored in `app/domains/`
- Example: `app/customer/services/create.rb`

**Services:**
- Implement business logic using ActiveInteraction
- All services must inherit from `ApplicationService`
- Store domain-specific services in their respective domains (e.g., `app/customer/services/create.rb`)
- Store general/shared services in `app/services/`
- Prefer passing objects (records) rather than IDs as parameters

**Background Jobs:**
- Use Jobs to encapsulate services when asynchronous processing is needed

## Frontend Conventions

### Views

- Create ViewComponents that inherit from `BaseComponent`
- Load all data in controllers - ViewComponents should not fetch data
- Render ViewComponents directly from controller actions (e.g., `Customer::PageComponent.new`)
- Do NOT use traditional Rails views (e.g., `show.html.erb`)

### Testing Support

- Decorate HTML elements with semantic classes and IDs
- Make CSS selectors legible and easier to debug
- Use data attributes for testing when appropriate
